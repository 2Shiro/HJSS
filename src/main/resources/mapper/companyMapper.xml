<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.mapper.CompanyMapper">
	<select id="getProposal">
		SELECT pro_idx, id, post_idx, resume_idx, status, TO_CHAR(created_at, 'YY-MM-DD') FROM PERSON_PROPOSAL_TB
	</select>
	
	<select  id = "getCompany" resultType = "com.green.domain.CompanyVo">
		
		SELECT	ID,
				CNUMBER,
				CNAME,
				COM_LOGO,
				CREPRESENTIVE,
				ADDRESS,
				MANAGER_NAME,
				COMPANY_MANAGERPHONE,
				CSIZE,
				TO_CHAR( CYEAR, 'YY-MM-DD')	CYEAR
		FROM	COMPANY_INFO_TB
		WHERE	ID = 'cp1'
	
	</select>
	<!-- logo default값 넣을 예정 -->
<insert id="insert">
INSERT ALL
	INTO user_tb (id, password, type,user_email, created_date)
	VALUES(#{id},#{password},1,#{user_email},#{created_date})

	INTO company_info_tb (id,cnumber, cname, com_logo,crepresentive, address,
	                      manager_name,company_managerphone,csize,cyear)
	VALUES(#{id}, #{cnumber}, #{cname}, 'logo' , #{crepresentive}, #{address},
	       #{manager_name}, #{company_managerphone},#{csize}, #{cyear})
SELECT * FROM DUAL
</insert> 

<select id="login">
 SELECT id,password,type
 FROM   user_tb
 WHERE  id=#{arg0} AND password=#{arg1} AND type=1
</select>
	
</mapper>